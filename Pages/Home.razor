@page "/"
@using System.Globalization
@using MeetupWebsite.Sessionize

<!-- Hero Section -->
<section class="hero-section" xmlns="http://www.w3.org/1999/html">
    <div class="container">
        <div class="row align-items-center py-4">
            <div class="col-lg-12 text-center">
                <h1 class="display-4 fw-bold mb-3">.NET & Azure Meetup Štajerska</h1>
                <p class="lead mb-4">Connecting developers and cloud enthusiasts in the Štajerska region</p>
            </div>
        </div>
    </div>
</section>

<!-- Main Content -->
<div class="container py-5">
    <main>
        <!-- Upcoming Event Section -->
        <section class="mb-5">
            <div class="row">
                <div class="col-12">
                    <h2 class="h3 text-primary mb-4 border-bottom pb-2">Upcoming Event</h2>
                    <div class="card">
                        <div class="card-body p-4">
                            <div class="row align-items-center">
                                <div class="col-md-8">
                                    <div class="d-flex align-items-center mb-3">
                                        <div class="date-badge text-white rounded-3 p-3 me-4 text-center">
                                            <div class="h4 mb-0 fw-bold">16</div>
                                            <div class="small">OCT</div>
                                        </div>
                                        <div>
                                            <h3 class="h5 mb-1">NET & Azure Meetup: 16. October 2025</h3>
                                            <p class="text-muted mb-0">
                                                <i class="bi bi-clock me-1"></i> 18:30 - 21:00 CEST
                                                <i class="bi bi-geo-alt ms-3 me-1"></i>Tehnoloski Park Ptuj
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 text-md-end">
                                    <div class="d-inline-flex flex-column gap-2">
                                        <a href="https://www.eventbrite.it/e/net-azure-meetup-stajerska-october-2025-tickets-1683451411489?utm-campaign=social&utm-content=attendeeshare&utm-medium=discovery&utm-term=listing&utm-source=cp&aff=ebdsshcopyurl"
                                           target="_blank"
                                           class="btn btn-primary btn-lg px-4">
                                            <i class="bi bi-ticket-perforated me-2"></i>Reserve your seat
                                        </a>

                                        @*                                         <a href="https://sessionize.com/net-azure-meetup-stajerska-oct2025/"
                                           target="_blank"
                                           class="btn btn-outline-primary btn-lg px-4">

                                            <img src="https://sessionize.com/landing/images/brand/logo/sessionize-avatar.png" class="sessionize" />
                                            Submit a session
                                        </a> *@
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Speaker Section -->
        @if (sessionizeData?.Speakers?.Count > 0)
        {
            <section class="mb-5">
                <h2 class="h3 text-primary mb-4 border-bottom pb-2">Speakers</h2>
                <div class="row text-center">
                    @foreach (var speaker in sessionizeData.Speakers.OrderBy(_ => Random.Shared.Next()))
                    {
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card speaker-card h-100">
                                <img src="@speaker.ProfilePicture" class="speaker-image card-img-top" alt="@speaker.FullName" />
                                <div class="card-body">
                                    <h5 class="card-title fw-bold">@speaker.FullName</h5>
                                    <p class="card-text text-muted">@speaker.TagLine</p>

                                    @foreach (var session in sessionizeData.Sessions.Where(s => s.Speakers.Contains(speaker.Id)))
                                    {
                                        <h6 class="card-subtitle mb-2 mt-3 text-primary fw-bold">@session.Title</h6>
                                    }

                                </div>
                            </div>
                        </div>
                    }
                </div>
            </section>
        }
        else
        {
            <p class="text-muted">Speakers will be announced soon. Stay tuned!</p>
        }

        <!-- Agenda Section -->
        <section class="mb-5">
            <div class="row">
                <div class="col-12">
                    <h2 class="h3 text-primary mb-4 border-bottom pb-2">Agenda</h2>
                    <div class="card">
                        <div class="card-body p-4">

                            <div class="row">
                                <div class="col-lg-8 offset-lg-2">
                                    @if (scheduleData is not null)
                                    {
                                        foreach (var day in scheduleData)
                                        {
                                            foreach (var room in day.Rooms)
                                            {
                                                <table class="table table-hover">
                                                    <tbody>
                                                    @foreach (var session in room.Sessions)
                                                    {
                                                        <tr>
                                                            <td>@session.StartsAt.ToString("HH:mm", CultureInfo.InvariantCulture)</td>
                                                            <td>
                                                                <h5>@session.Title</h5>
                                                                <div class="text-muted">
                                                                    @foreach(var speaker in session.Speakers)
                                                                    {
                                                                        <span>@speaker.Name</span>
                                                                    }
                                                                </div>
                                                                @if (!string.IsNullOrWhiteSpace(session.Description))
                                                                {
                                                                    <p>
                                                                        @(GetMarkup(session.Description))
                                                                    </p>
                                                                }
                                                            </td>
                                                        </tr>
                                                    }
                                                    </tbody>
                                                </table>
                                            }
                                        }
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Location Section -->
        <section>
            <div class="row">
                <div class="col-12">
                    <h2 class="h3 text-primary mb-4 border-bottom pb-2">Event and Parking Locations</h2>
                    <div class="card">
                        <div class="card-body p-0">
                            <div class="p-4">
                                <h4 class="h5 mb-2">Tehnoloski Park Ptuj</h4>
                                <p class="text-muted mb-0">
                                    <i class="bi bi-geo-alt-fill text-primary me-2"></i>
                                    Vičava 1, 2250 Ptuj, Slovenia
                                </p>
                            </div>
                            <div class="map-container ratio ratio-16x9">
                                <iframe src="https://www.google.com/maps/embed?pb=!1m28!1m12!1m3!1d281.055!2d15.8636236!3d46.4221844!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m13!3e2!4m3!3m2!1d46.4221955!2d15.8641547!4m3!3m2!1d46.421719!2d15.86549!4m3!3m2!1d46.421719!2d15.86549!5e0!3m2!1sen!2ssi!4v1725986400000"
                                        width="100%"
                                        height="450"
                                        style="border:0;"
                                        allowfullscreen=""
                                        loading="lazy"
                                        referrerpolicy="no-referrer-when-downgrade">
                                </iframe>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>



        <!-- Gallery and past events section -->
        <section class="my-5">
            <div class="row">
                <div class="col-12">
                    <h2 class="h3 text-primary mb-4 border-bottom pb-2">Gallery and Past Events</h2>
                    <div class="card">
                        <div class="card-body p-4">
                            <div class="row justify-content-center gx-3">
                                <div class="col-auto">
                                    <a href="/gallery" class="btn btn-primary btn-lg px-4">
                                        <i class="bi bi-image me-2"></i>Gallery</a>
                                </div>
                                <div class="col-auto">
                                    <a href="/history" class="btn btn-primary btn-lg px-4">
                                        <i class="bi bi-archive me-2"></i>Past events</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
</div>

<!-- Footer -->
<footer class="footer-section">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center footer-link">
                <p>&copy; @DateTime.Now.Year .NET & Azure Meetup Štajerska. All rights reserved. | Design by <a href="https://github.com/fullstackgenerator" target="_blank" rel="noopener noreferrer">Simon Hojnik</a></p>
            </div>
        </div>
    </div>
</footer>
